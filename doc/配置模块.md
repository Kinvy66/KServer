# 配置模块

配置模块框图：
![config-uml](https://kinvy-images.oss-cn-beijing.aliyuncs.com/Images/diagram-17344954375024489049.png)


- Config: 负责管理所有的配置，其中有一个map类型的数据成员，存放所有的配置
- ConfigVarBase: 单个配置项的抽象基类，提供配置参数值和字符串之间的互相转换纯虚方法，具体实现是ConfigVar类
- ConfigVar: 模板类，模板参数： T 参数的类型， 参数和字符串互转的模板类；ConfigVarBase的子类，实现字符转换，以及配置变更的回调函数管理
- LexicalCast: 一系列的特例化模板，实现各种数据类型和字符串的转换

## 使用
创建配置： `ConfigVar<T>::ptr Lookup(name, default_value,description = "")`

```c++
sylar::ConfigVar<int>::ptr  g_int_value_config =
        sylar::Config::Lookup("system.port", (int)8080, "system port");
```

使用 `LoadFromYaml` 加载yaml配置文件，如果某个配置项注册了配置变更回调函数，那么在加载新的配置值时会调用该配置项的变更回调函数。